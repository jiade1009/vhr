(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a6b2f74"],{"0009":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div",[t("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入股票代码或名称进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.initBeanlist},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initBeanlist.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.initBeanlist}},[e._v("\n          搜索\n        ")])],1),t("div",[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.updateBean}},[e._v("\n          重新更新股票信息\n        ")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.updateCalendar}},[e._v("\n          刷新股票交易日历\n        ")])],1)]),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.beanlist,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},e._l(e.tableColumns,(function(e){return t("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,align:"left"}})})),1),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1)])])},a=[],l={name:"StockBasicinfo",data:function(){return{total:0,page:1,size:this.$ELEMENT.pagesize,keyword:"",loading:!1,beanlist:[],bean:{code:"",name:"",datePublish:""},tableColumns:[{prop:"name",label:"名称",show:!0},{prop:"code",label:"代码",show:!0},{prop:"datePublish",label:"上市日期",show:!0}]}},mounted:function(){this.initBeanlist()},methods:{sizeChange:function(e){this.size=e,this.initBeanlist()},currentChange:function(e){this.page=e,this.initBeanlist()},initBeanlist:function(){var e=this;this.loading=!0;var t="/stock/basicinfo/?page="+this.page+"&size="+this.size;t+="&keyword="+this.keyword,this.getRequest(t).then((function(t){e.loading=!1,t&&(e.beanlist=t.data,e.total=t.total)}))},updateBean:function(){var e=this;this.$confirm("此操作将删除现有股票代码，并重新下载最新的股票代码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRequest("/stock/basicinfo/").then((function(t){t&&e.initBeanlist()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},updateCalendar:function(){var e=this;this.$confirm("此操作将重新下载最新的股票交易日历, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.postRequest("/stock/basicinfo/calendar/").then((function(e){}))})).catch((function(){e.$message({type:"info",message:"已取消更新"})}))}}},o=l,s=i("2877"),r=Object(s["a"])(o,n,a,!1,null,"4865fe0e",null);t["default"]=r.exports},"0485":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div",[t("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入股票代码进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.initBeanlist},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initBeanlist.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.initBeanlist}},[e._v("\n          搜索\n        ")])],1)]),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.beanlist,"row-key":"id","expand-row-keys":e.expands,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","row-class-name":e.getRowClassName},on:{"row-click":e.viewDetail}},[t("el-table-column",{attrs:{type:"expand",width:"1"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{"padding-left":"10px","padding-bottom":"5px"}},[t("div",{staticClass:"ema-content"},[i.row.detaillist&&i.row.detaillist.length>0?t("div",{staticClass:"orangeShip"},[t("p",{staticStyle:{color:"#409EFF"}},[t("i",{staticClass:"el-icon-star-off"}),e._v("交易明细记录")]),t("el-table",{staticStyle:{width:"100%"},attrs:{border:"",stripe:!1,data:i.row.detaillist,"header-cell-style":e.tb_header_style}},[t("el-table-column",{attrs:{prop:"timeCreate",label:"创建时间",align:"left"}}),t("el-table-column",{attrs:{prop:"cjTime",label:"交易时间",align:"left"}}),t("el-table-column",{attrs:{prop:"priceType",label:"委托价格",formatter:e.detailFormat,align:"left"}}),t("el-table-column",{attrs:{prop:"cjPrice",label:"成交价格",align:"left"}}),t("el-table-column",{attrs:{prop:"amount",label:"委托数量",align:"left"}}),t("el-table-column",{attrs:{prop:"cjAmount",label:"成交数量",align:"left"}}),t("el-table-column",{attrs:{prop:"cjTotal",label:"成交金额",align:"left"}}),t("el-table-column",{attrs:{prop:"cjFee",label:"手续费",align:"left"}}),t("el-table-column",{attrs:{prop:"tradeType",label:"交易类型",formatter:e.detailFormat,align:"left"}}),t("el-table-column",{attrs:{prop:"statusNote",label:"状态",align:"left"}}),t("el-table-column",{attrs:{prop:"message",label:"状态信息",align:"left"}}),t("el-table-column",{attrs:{prop:"taskstatusNote",label:"任务",align:"left"}}),t("el-table-column",{attrs:{prop:"taskmsg",label:"任务信息",align:"left"}}),t("el-table-column",{attrs:{prop:"taskpro",label:"任务进度",align:"left"}})],1)],1):t("div",[e._v("暂无交易明细记录")])])])]}}])}),e._l(e.tableColumns,(function(i){return t("el-table-column",{key:i.prop,attrs:{prop:i.prop,label:i.label,formatter:e.columnFormat,align:"left"}})})),t("el-table-column",{attrs:{fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{staticStyle:{padding:"3px"},attrs:{type:"info",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.viewDetail(i.row)}}},[e._v("查看交易")]),t("el-button",{staticStyle:{padding:"3px"},attrs:{type:"success",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.doCalculator(i.row)}}},[e._v("价格计算器")])]}}])})],2),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),t("el-dialog",{attrs:{title:"股票交易价格计算",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content grid-label"},[e._v("P1阶段：")])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content"},[e._v(e._s(e.bean.p1Price))])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content grid-label"},[e._v("P2阶段：")])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content"},[e._v(e._s(e.bean.p2Price))])])],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content grid-label"},[e._v("P3阶段：")])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content"},[e._v(e._s(e.bean.p3Price))])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content grid-label"},[e._v("P4阶段：")])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content"},[e._v(e._s(e.bean.p4Price))])])],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content grid-label"},[e._v("P5阶段：")])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content"},[e._v(e._s(e.bean.p5Price))])])],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content grid-label"},[e._v("当前阶段：")])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content"},[e._v(e._s(e.bean.sellStage))])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content grid-label"},[e._v("最高价：")])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content"},[e._v(e._s(e.bean.priceHigh))])])],1),t("el-row",{attrs:{gutter:20,hidden:e.bean.sellStage<1}},[t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content grid-label"},[e._v("当前阶段卖出价格：")])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content"},[e._v(e._s(e.bean.sellPrice))])])],1)],1)])],1)])},a=[],l={name:"StockHold",data:function(){return{total:0,page:1,size:this.$ELEMENT.pagesize,keyword:"",loading:!1,beanlist:[],tableColumns:[{prop:"code",label:"代码",show:!0},{prop:"timeCreate",label:"创建时间",show:!0},{prop:"timeUpdate",label:"更新时间",show:!0},{prop:"statusNote",label:"状态",show:!0},{prop:"buyPrice",label:"买入价",show:!0},{prop:"buyAmount",label:"买入数量",show:!0},{prop:"holdAmount",label:"持有数量",show:!0},{prop:"sellStage",label:"交易阶段",show:!0},{prop:"note",label:"备注",show:!0}],expands:[],expandRow:[],dialogVisible:!1,sellRule:{sellRatio:.5,p1Ratio:1.15,p2Ratio:1.1,p3Ratio:1.1,p4Ratio:1.1,p5Ratio:1.1,sp1Ratio:.85,sp2Ratio:.87,sp3Ratio:.89,sp4Ratio:.91},bean:{id:null,buyPrice:null,holdAmount:100,sellStage:0,priceClose:null,priceHigh:null,priceLow:null,priceSellHigh:null,priceSellLow:null,closeEma18:null,p1Price:null,p1SellPrice:null,p2Price:null,p2SellPrice:null,p3Price:null,p3SellPrice:null,p4Price:null,p4SellPrice:null,p5Price:null}}},mounted:function(){this.initBeanlist(),this.getSellRule()},methods:{columnFormat:function(e,t){var i=t.property,n=e[i];return"status"==i?e["statusNote"]:n},detailFormat:function(e,t){var i=t.property,n=e[i];return"tradeType"==i?"0"==n?"买入":"1"==n?"卖出":"2"==n?"买入撤销":"卖出撤销":"priceType"==i?"1"==n?"最新价":"B"==n.substring(0,1)?"买"+n.substring(1)+"价":"B"==n.substring(0,1)?"卖"+n.substring(1)+"价":n:n},sizeChange:function(e){this.size=e,this.initBeanlist()},currentChange:function(e){this.page=e,this.initBeanlist()},initBeanlist:function(){var e=this;this.loading=!0;var t="/stock/hold/?page="+this.page+"&size="+this.size;t+="&keyword="+this.keyword,this.getRequest(t).then((function(t){e.loading=!1,t&&(e.beanlist=t.data,e.total=t.total)}))},viewDetail:function(e){e.detaillist?this.expands.length>0&&this.expands[0]==e.id?(this.expands=[],this.expandRow=[]):(this.expands=[e.id],this.expandRow=[e]):this.getDetailList(e)},getDetailList:function(e){var t=this,i="/stock/holdtrade/byholdid?hid="+e.id;this.getRequest(i).then((function(i){t.loading=!1,i&&(e.detaillist=i,t.expands=[e.id],t.expandRow=[e])}))},tb_header_style:function(){var e={"background-color":"rgb(160, 207, 255)",color:"#000"};return e},getRowClassName:function(){return"row-expand-cover"},runBuy:function(e){var t=this;this.$confirm("确认购买该股票吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.putRequest("/stock/hold/runBuy?holdId="+e.id).then((function(e){e&&t.initBeanlist()}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},getSellRule:function(){var e=this;this.getRequest("/stock/sellrule/getRunning").then((function(t){t&&t.obj&&(e.sellRule=t.obj)}))},doCalculator:function(e){this.dialogVisible=!0;var t=e,i=this.sellRule,n=(t.buyPrice*i.p1Ratio).toFixed(2),a=(n*i.p2Ratio).toFixed(2),l=(a*i.p3Ratio).toFixed(2),o=(l*i.p4Ratio).toFixed(2),s=(o*i.p5Ratio).toFixed(2),r=this.bean.buyPrice,c=this.bean.priceHigh,p=0,u=0;parseFloat(c)<parseFloat(r)?(p=0,u="无"):c>n&&c<a?(p=1,u=i.sp1Ratio):c>a&&c<l?(p=2,u=i.sp2Ratio):c>l&&c<o?(p=3,u=i.sp3Ratio):c>o&&c<s?(p=4,u=i.sp4Ratio):c>s&&(p=5,u=1,c=s);var d="无"==u?"暂无":(c*u).toFixed(2),b=this.$utils.twoJsonMerge(this.bean,{p1Price:n,p2Price:a,p3Price:l,p4Price:o,p5Price:s,sellStage:p,spRatio:u,sellPrice:d});this.bean=b}}},o=l,s=(i("dc7e"),i("2877")),r=Object(s["a"])(o,n,a,!1,null,null,null);t["default"]=r.exports},"159b":function(e,t,i){},"1aee":function(e,t,i){},"1fc4":function(e,t,i){"use strict";i.r(t);i("7f7f");var n=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div",[t("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入员工名进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.initBeanlist},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initBeanlist.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.initBeanlist}},[e._v("\n          搜索\n        ")])],1),t("div",[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddBeanView}},[e._v("\n          新增\n        ")])],1)]),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.beanlist,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("el-table-column",{attrs:{prop:"employee",fixed:"",align:"left",formatter:e.columnFormat,label:"员工"}}),t("el-table-column",{attrs:{prop:"messageType",align:"left",label:"接收的消息"},scopedSlots:e._u([{key:"default",fn:function(i){return e._l(i.row.messageType,(function(i,n){return"1"==i?t("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(e._s(e.msg_type_label[n]))]):e._e()}))}}])}),t("el-table-column",{attrs:{prop:"sendType",align:"left",label:"接收方式"},scopedSlots:e._u([{key:"default",fn:function(i){return e._l(i.row.sendType,(function(i,n){return"1"==i?t("el-tag",{attrs:{type:"primary","disable-transitions":""}},[e._v(e._s(e.send_type_label[n]))]):e._e()}))}}])}),t("el-table-column",{attrs:{prop:"status",align:"left",formatter:e.columnFormat,label:"是否生效"}}),t("el-table-column",{attrs:{fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{staticStyle:{padding:"3px"},attrs:{type:"info",size:"mini"},on:{click:function(t){return e.showEditBeanView(i.row)}}},[e._v("编辑")]),t("el-button",{staticStyle:{padding:"3px"},attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.changeStatus(i.row)}}},[e._v(e._s(i.row.status?"停止":"激活"))]),t("el-button",{staticStyle:{padding:"3px"},attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteBean(i.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),t("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",[t("el-form",{ref:"beanForm",attrs:{model:e.bean,"status-icon":"","label-width":"140px"}},["insert"==e.action?t("el-form-item",{attrs:{label:"员工"}},[t("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入员工名字","remote-method":e.getEmployees,loading:e.loading},model:{value:e.empids,callback:function(t){e.empids=t},expression:"empids"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),t("el-form-item",{attrs:{label:"接收消息类型:"}},[t("el-checkbox-group",{model:{value:e.msg_type_checked,callback:function(t){e.msg_type_checked=t},expression:"msg_type_checked"}},e._l(e.msg_type_checkbox,(function(i){return t("el-checkbox",{key:i.label,attrs:{label:i.label}},[e._v(e._s(i.name))])})),1)],1),t("el-form-item",{attrs:{label:"接收消息方式:"}},[t("el-checkbox-group",{model:{value:e.send_type_checked,callback:function(t){e.send_type_checked=t},expression:"send_type_checked"}},e._l(e.send_type_checkbox,(function(i){return t("el-checkbox",{key:i.label,attrs:{label:i.label}},[e._v(e._s(i.name))])})),1)],1),t("el-form-item",{attrs:{label:"状态:"}},[t("el-switch",{staticStyle:{"margin-right":"10px"},model:{value:e.bean.status,callback:function(t){e.$set(e.bean,"status",t)},expression:"bean.status"}}),e._v("是否生效\n          ")],1),t("el-input",{attrs:{type:"hidden",id:"empid"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.doAddBean}},[e._v("确 定")])],1)])],1)])},a=[],l=(i("55dd"),{name:"StockMessageConf",data:function(){return{total:0,page:1,size:this.$ELEMENT.pagesize,msg_type_label:["发现信号","买入通知","卖出通知"],send_type_label:["短信","邮件","微信"],keyword:"",loading:!1,beanlist:[],bean:{empids:[],empid:null,messageType:"",sendType:"",status:!0},msg_type_checked:[],msg_type_checkbox:[{name:"发现信号",label:"0"},{name:"买入通知",label:"1"},{name:"卖出通知",label:"2"}],send_type_checked:[],send_type_checkbox:[{name:"短信",label:"0"},{name:"邮件",label:"1"},{name:"微信",label:"2"}],action:"insert",title:"新增",dialogVisible:!1,options:[],empids:[]}},mounted:function(){this.initBeanlist()},methods:{columnFormat:function(e,t){var i=t.property,n=e[i];return"employee"==i?n["name"]:"status"==i?n?"生效":"未生效":void 0},sizeChange:function(e){this.size=e,this.initBeanlist()},currentChange:function(e){this.page=e,this.initBeanlist()},showAddBeanView:function(){this.emptyBean(),this.title="新增消息配置",this.action="insert",this.dialogVisible=!0},showEditBeanView:function(e){this.title="编辑消息配置",this.action="edit",this.emptyBean(),this.bean=e;var t=e.messageType,i=e.sendType;if(t)for(var n=0;n<t.length;n++)1==t.charAt(n)&&(this.msg_type_checked[this.msg_type_checked.length]=n+"");if(i)for(var a=0;a<i.length;a++)1==i.charAt(a)&&(this.send_type_checked[this.send_type_checked.length]=a+"");this.dialogVisible=!0},changeStatus:function(e){var t=this;this.$confirm("改变【"+e.employee.name+"】接收消息的有效性, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={empid:e.empid,status:!e.status};t.putRequest("/stock/messageconf/",i).then((function(e){e&&t.initBeanlist()}))})).catch((function(){t.$message({type:"info",message:"已取消修改"})}))},deleteBean:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/stock/messageconf/"+e.empid).then((function(e){e&&t.initBeanlist()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},initBeanlist:function(){var e=this;this.loading=!0;var t="/stock/messageconf/?page="+this.page+"&size="+this.size;this.keyword&&(t+="&employee.name="+this.keyword),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.beanlist=t.data,e.total=t.total)}))},emptyBean:function(){this.bean={empids:[],empid:null,messageType:"",sendType:"",status:!0},this.msg_type_checked=[],this.send_type_checked=[],this.options=[],this.empids=[]},doAddBean:function(){var e=this,t=this.msg_type_checked,i=["0","0","0"];if(t)for(var n in t=t.sort((function(e,t){return e-t})),t)i[parseInt(t[n])]="1";var a=i.join(""),l=this.send_type_checked,o=["0","0","0"];if(l)for(var s in l=l.sort((function(e,t){return e-t})),l)o[parseInt(l[s])]="1";var r=o.join("");if(this.bean.empid){var c={empid:this.bean.empid,messageType:a,sendType:r,status:this.bean.status};this.putRequest("/stock/messageconf/",c).then((function(t){t&&(e.dialogVisible=!1,e.initBeanlist())}))}else this.empids.length>0&&(this.bean.empids=this.empids,this.bean.messageType=a,this.bean.sendType=r,this.postRequest("/stock/messageconf/",this.bean).then((function(t){t&&(e.dialogVisible=!1,e.initBeanlist())})))},getEmployees:function(e){var t=this;if(""!==e){var i="/employee/basic/list?name="+e;this.getRequest(i).then((function(e){e&&e.total>0&&(t.options=e.data.map((function(e){return{value:"".concat(e.id),label:"".concat(e.name)}})))}))}else this.options=[]}}}),o=l,s=(i("58de"),i("2877")),r=Object(s["a"])(o,n,a,!1,null,null,null);t["default"]=r.exports},"2ace":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",[e._m(0),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"evtTable",staticStyle:{width:"100%"},attrs:{data:e.beanlist,"row-key":"id",stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("el-table-column",{attrs:{prop:"timeCreate",label:"创建日期",align:"left"}}),t("el-table-column",{attrs:{prop:"timeRunBegin",label:"运行时间",align:"left"}}),t("el-table-column",{attrs:{prop:"emaIndex",label:"EMA线",align:"left"}}),t("el-table-column",{attrs:{prop:"runStatus",label:"状态",formatter:e.formatterText,align:"left"}}),t("el-table-column",{attrs:{prop:"runStatusDesc",label:"运行结果",align:"left"}}),t("el-table-column",{attrs:{fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[0==i.row.runStatus?t("el-button",{staticStyle:{padding:"3px"},attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.runBuyRule(i.row)}}},[e._v("运行策略\n            ")]):e._e()]}}])})],1),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1)])])},a=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div")])}],l={name:"StockWeeklylineEmaResult",data:function(){return{total:0,page:1,size:this.$ELEMENT.pagesize,keyword:"",loading:!1,beanlist:[],disabled:!1}},mounted:function(){this.initBeanlist()},methods:{formatterText:function(e,t){var i=t.property,n=e[i];return"rehabilitationWay"==i?"qfq"==n?"前复权":"hfq"==n?"后复权":"未复权":"result"==i?"0"==n?"成功":"1"==n?"失败":"":"emaResult"==i?"0"==n?"未生成":"1"==n?"已生成":"生成失败":"generateType"==i?"0"==n?"手动生成":"自动生成":"status"==i?"0"==n?"成功":"失败":"runStatus"==i?"0"==n?"未运行":"1"==n?"运行成功":"运行失败":void 0},sizeChange:function(e){this.size=e,this.initBeanlist()},currentChange:function(e){this.page=e,this.initBeanlist()},initBeanlist:function(){var e=this;this.loading=!0;var t="/stock/weeklylineemaresult/?page="+this.page+"&size="+this.size;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.beanlist=t.data,e.total=t.total)}))},runBuyRule:function(e){var t=this;this.$confirm("确认采用该EMA数据运行购买策略吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.putRequest("/stock/weeklylineemaresult/runBuyRule?emaid="+e.id).then((function(e){e&&t.getEmaList(t.expandRow)}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))}}},o=l,s=(i("b861"),i("2877")),r=Object(s["a"])(o,n,a,!1,null,null,null);t["default"]=r.exports},5897:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div"),t("div",[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showAddbtn,expression:"showAddbtn"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddBeanView}},[e._v("\n          添加卖出策略\n        ")])],1)]),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.beanlist,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e._l(e.tableColumns,(function(i){return t("el-table-column",{key:i.prop,attrs:{prop:i.prop,label:i.label,formatter:e.columnFormat,align:"left"}})})),t("el-table-column",{attrs:{fixed:"right",width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[0==i.row.status?t("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini"},on:{click:function(t){return e.showEditBeanView(i.row)}}},[e._v("编辑")]):e._e(),0==i.row.status?t("el-button",{staticStyle:{padding:"3px"},attrs:{type:"success",size:"mini"},on:{click:function(t){return e.toRunBean(i.row.id)}}},[e._v("投入运行")]):e._e()]}}])})],2),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),t("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",[t("el-form",{ref:"beanForm",attrs:{model:e.bean,"status-icon":"",rules:e.rules,"label-width":"140px"}},[t("el-divider",{attrs:{"content-position":"left"}},[e._v("止损规则")]),t("div",{staticStyle:{"margin-bottom":"50px"}},[e._v("即股票价格低于当前的EMA_18，卖出所有股票")]),t("el-divider",{attrs:{"content-position":"left"}},[e._v("止盈规则")]),t("el-form-item",{attrs:{label:"首次止盈卖出比例:",prop:"sellRatio"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"卖出比例"},model:{value:e.bean.sellRatio,callback:function(t){e.$set(e.bean,"sellRatio",t)},expression:"bean.sellRatio"}}),t("div",[e._v("首次止盈卖出所持股票数比例，默认0.5")])],1),t("el-form-item",{attrs:{label:"止盈P1阶段比例:",prop:"p1Ratio"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入比例"},model:{value:e.bean.p1Ratio,callback:function(t){e.$set(e.bean,"p1Ratio",t)},expression:"bean.p1Ratio"}}),t("div",[e._v("止盈P1阶段梯度价格计算公式：股票买入价*止盈P1阶段比例，止盈P1阶段比例默认值：1.15")])],1),t("el-form-item",{attrs:{label:"止盈P2阶段比例:",prop:"p2Ratio"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入比例"},model:{value:e.bean.p2Ratio,callback:function(t){e.$set(e.bean,"p2Ratio",t)},expression:"bean.p2Ratio"}}),t("div",[e._v("止盈P2阶段梯度价格计算公式：止盈P1阶段梯度价格*止盈P2阶段比例，止盈P2阶段比例默认值：1.1")])],1),t("el-form-item",{attrs:{label:"止盈P3阶段比例:",prop:"p3Ratio"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入比例"},model:{value:e.bean.p3Ratio,callback:function(t){e.$set(e.bean,"p3Ratio",t)},expression:"bean.p3Ratio"}}),t("div",[e._v("止盈P3阶段梯度价格计算公式：止盈P2阶段梯度价格*止盈P3阶段比例，止盈P3阶段比例默认值：1.1")])],1),t("el-form-item",{attrs:{label:"止盈P4阶段比例:",prop:"p4Ratio"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入比例"},model:{value:e.bean.p4Ratio,callback:function(t){e.$set(e.bean,"p4Ratio",t)},expression:"bean.p4Ratio"}}),t("div",[e._v("止盈P4阶段梯度价格计算公式：止盈P3阶段梯度价格*止盈P4阶段比例，止盈P4阶段比例默认值：1.1")])],1),t("el-form-item",{attrs:{label:"止盈P5阶段比例:",prop:"p5Ratio"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入比例"},model:{value:e.bean.p5Ratio,callback:function(t){e.$set(e.bean,"p5Ratio",t)},expression:"bean.p5Ratio"}}),t("div",[e._v("止盈P5阶段梯度价格计算公式：止盈P4阶段梯度价格*止盈P5阶段比例，止盈P5阶段比例默认值：1.1")])],1),t("el-form-item",{attrs:{label:"止盈P1阶段卖出价比例:",prop:"sp1Ratio"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入比例"},model:{value:e.bean.sp1Ratio,callback:function(t){e.$set(e.bean,"sp1Ratio",t)},expression:"bean.sp1Ratio"}}),t("div",[e._v("止盈P1阶段卖出价格计算公式：股票近期最高价*止盈P1阶段卖出价比例，止盈P1阶段卖出价比例默认值：0.85")])],1),t("el-form-item",{attrs:{label:"止盈P2阶段卖出价比例:",prop:"sp2Ratio"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入比例"},model:{value:e.bean.sp2Ratio,callback:function(t){e.$set(e.bean,"sp2Ratio",t)},expression:"bean.sp2Ratio"}}),t("div",[e._v("止盈P2阶段卖出价格计算公式：股票近期最高价*止盈P2阶段卖出价比例，止盈P2阶段卖出价比例默认值：0.87")])],1),t("el-form-item",{attrs:{label:"止盈P3阶段卖出价比例:",prop:"sp3Ratio"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入比例"},model:{value:e.bean.sp3Ratio,callback:function(t){e.$set(e.bean,"sp3Ratio",t)},expression:"bean.sp3Ratio"}}),t("div",[e._v("止盈P3阶段卖出价格计算公式：股票近期最高价*止盈P3阶段卖出价比例，止盈P3阶段卖出价比例默认值：0.89")])],1),t("el-form-item",{attrs:{label:"止盈P4阶段卖出价比例:",prop:"sp4Ratio"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入比例"},model:{value:e.bean.sp4Ratio,callback:function(t){e.$set(e.bean,"sp4Ratio",t)},expression:"bean.sp4Ratio"}}),t("div",[e._v("止盈P4阶段卖出价格计算公式：股票近期最高价*止盈P4阶段卖出价比例，止盈P4阶段卖出价比例默认值：0.91")])],1),t("el-input",{attrs:{type:"hidden",id:"id"}}),t("el-input",{attrs:{type:"hidden",id:"status"}}),t("el-input",{attrs:{type:"hidden",id:"timeCreate"}}),t("el-input",{attrs:{type:"hidden",id:"timeUpdate"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.doAddBean}},[e._v("确 定")])],1)])],1)])},a=[],l={name:"StockSellRule",data:function(){var e=function(e,t,i){var n=/^(0|([1-9]\d*))(\.\d+)?$/g;""===t?i(new Error("请输入内容")):n.test(t)?i():i(new Error("请输入数字"))};return{total:0,page:1,size:this.$ELEMENT.pagesize,keyword:"",loading:!1,beanlist:[],bean:{id:null,sellRatio:.5,p1Ratio:1.15,p2Ratio:1.1,p3Ratio:1.1,p4Ratio:1.1,p5Ratio:1.1,sp1Ratio:.85,sp2Ratio:.87,sp3Ratio:.89,sp4Ratio:.91,status:0},title:"添加卖出策略",dialogVisible:!1,rules:{sellRatio:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}],p1Ratio:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}],p2Ratio:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}],p3Ratio:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}],p4Ratio:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}],p5Ratio:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}],sp1Ratio:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}],sp2Ratio:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}],sp3Ratio:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}],sp4Ratio:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}]},showAddbtn:!1,tableColumns:[{prop:"status",label:"状态"},{prop:"sellRatio",label:"卖出比例"},{prop:"p1Ratio",label:"P1比例"},{prop:"p2Ratio",label:"P2比例"},{prop:"p3Ratio",label:"P3比例"},{prop:"p4Ratio",label:"P4比例"},{prop:"p5Ratio",label:"P5比例"},{prop:"sp1Ratio",label:"SP1比例"},{prop:"sp2Ratio",label:"SP2比例"},{prop:"sp3Ratio",label:"SP3比例"},{prop:"sp4Ratio",label:"SP4比例"},{prop:"timeCreate",label:"创建时间"},{prop:"timeUpdate",label:"更新时间"}]}},mounted:function(){this.getDraft(),this.initBeanlist()},methods:{columnFormat:function(e,t){var i=t.property,n=e[i];return"status"==i?"0"==n?"草稿":"1"==n?"运行":"结束":n},sizeChange:function(e){this.size=e,this.initBeanlist()},currentChange:function(e){this.page=e,this.initBeanlist()},showAddBeanView:function(){this.emptyBean(),this.title="新增卖出策略",this.dialogVisible=!0},showEditBeanView:function(e){this.title="编辑卖出策略",this.bean=e,this.dialogVisible=!0},initBeanlist:function(){var e=this;this.loading=!0;var t="/stock/sellrule/?page="+this.page+"&size="+this.size;t+="&keyword="+this.keyword,this.getRequest(t).then((function(t){e.loading=!1,t&&(e.beanlist=t.data,e.total=t.total)}))},emptyBean:function(){this.bean={id:null,sellRatio:.5,p1Ratio:1.15,p2Ratio:1.1,p3Ratio:1.1,p4Ratio:1.1,p5Ratio:1.1,sp1Ratio:.85,sp2Ratio:.87,sp3Ratio:.89,sp4Ratio:.91,status:0}},getDraft:function(){var e=this;this.getRequest("/stock/sellrule/getDraft").then((function(t){t&&(t.obj?e.showAddbtn=!1:t.obj||(e.showAddbtn=!0))}))},doAddBean:function(){var e=this;this.bean.id?this.$refs["beanForm"].validate((function(t){t&&e.putRequest("/stock/sellrule/",e.bean).then((function(t){t&&(e.dialogVisible=!1,e.initBeanlist())}))})):this.$refs["beanForm"].validate((function(t){t&&e.postRequest("/stock/sellrule/",e.bean).then((function(t){t&&(e.dialogVisible=!1,e.initBeanlist())}))}))},toRunBean:function(e){var t=this;this.$confirm("确认将该卖出规则投入运行中？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.getRequest("/stock/sellrule/run/"+e).then((function(e){e&&(t.getDraft(),t.initBeanlist())}))})).catch((function(){t.$message({type:"info",message:"已取消运行该规则"})}))}}},o=l,s=i("2877"),r=Object(s["a"])(o,n,a,!1,null,"f10ecac2",null);t["default"]=r.exports},"58de":function(e,t,i){"use strict";i("159b")},"8b4f":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div"),t("div",[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showAddbtn,expression:"showAddbtn"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddBeanView}},[e._v("\n          添加买入策略\n        ")])],1)]),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.beanlist,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e._l(e.tableColumns,(function(i){return t("el-table-column",{key:i.prop,attrs:{prop:i.prop,label:i.label,formatter:e.columnFormat,align:"left"}})})),t("el-table-column",{attrs:{fixed:"right",width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[0==i.row.status?t("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini"},on:{click:function(t){return e.showEditBeanView(i.row)}}},[e._v("编辑")]):e._e(),0==i.row.status?t("el-button",{staticStyle:{padding:"3px"},attrs:{type:"success",size:"mini"},on:{click:function(t){return e.toRunBean(i.row.id)}}},[e._v("投入运行")]):e._e()]}}])})],2),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),t("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",[t("el-form",{ref:"beanForm",attrs:{model:e.bean,"status-icon":"",rules:e.rules,"label-width":"140px"}},[t("el-form-item",{attrs:{label:"上市时长（年）:",prop:"timeMarket"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入上市时长（年）"},model:{value:e.bean.timeMarket,callback:function(t){e.$set(e.bean,"timeMarket",t)},expression:"bean.timeMarket"}}),t("el-switch",{staticStyle:{"margin-right":"10px"},model:{value:e.bean.timeMarketOption,callback:function(t){e.$set(e.bean,"timeMarketOption",t)},expression:"bean.timeMarketOption"}}),e._v("是否开启\n          ")],1),t("el-form-item",{attrs:{label:"策略周期（周）:",prop:"rulePeriod"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"策略周期"},model:{value:e.bean.rulePeriod,callback:function(t){e.$set(e.bean,"rulePeriod",t)},expression:"bean.rulePeriod"}}),e._v("\n            例如计算在多少周之内，ema75>ema18\n          ")],1),t("el-form-item",{attrs:{label:"成交金额比例:",prop:"turnoverLimit"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入成交金额比例"},model:{value:e.bean.turnoverLimit,callback:function(t){e.$set(e.bean,"turnoverLimit",t)},expression:"bean.turnoverLimit"}}),t("el-switch",{staticStyle:{"margin-right":"10px"},model:{value:e.bean.turnoverLimitOption,callback:function(t){e.$set(e.bean,"turnoverLimitOption",t)},expression:"bean.turnoverLimitOption"}}),e._v("是否开启\n            "),t("div",[e._v("5交易日平均成交金额/买入金额>turnoverLimit")])],1),t("el-form-item",{attrs:{label:"收敛度:",prop:"converLimit"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入收敛度"},model:{value:e.bean.converLimit,callback:function(t){e.$set(e.bean,"converLimit",t)},expression:"bean.converLimit"}}),t("el-switch",{staticStyle:{"margin-right":"10px"},model:{value:e.bean.converLimitOption,callback:function(t){e.$set(e.bean,"converLimitOption",t)},expression:"bean.converLimitOption"}}),e._v("是否开启\n            "),t("div",[e._v("当天EMA75/当天EMA18<converLimit ")])],1),t("el-form-item",{attrs:{label:"下跌幅度:",prop:"shockLimit"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入下跌幅度"},model:{value:e.bean.shockLimit,callback:function(t){e.$set(e.bean,"shockLimit",t)},expression:"bean.shockLimit"}}),t("el-switch",{staticStyle:{"margin-right":"10px"},model:{value:e.bean.shockLimitOption,callback:function(t){e.$set(e.bean,"shockLimitOption",t)},expression:"bean.shockLimitOption"}}),e._v("是否开启\n            "),t("div",[e._v("最低价/最高价<=shockLimit")])],1),t("el-form-item",{attrs:{label:"买入价限价:",prop:"buyPriceLimit"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入买入价限价"},model:{value:e.bean.buyPriceLimit,callback:function(t){e.$set(e.bean,"buyPriceLimit",t)},expression:"bean.buyPriceLimit"}}),t("el-switch",{staticStyle:{"margin-right":"10px"},model:{value:e.bean.buyPriceLimitOption,callback:function(t){e.$set(e.bean,"buyPriceLimitOption",t)},expression:"bean.buyPriceLimitOption"}}),e._v("是否开启\n            "),t("div",[e._v("买入价格/昨日的EMA_75的价格<=1.03，即不超过3%")])],1),t("el-input",{attrs:{type:"hidden",id:"id"}}),t("el-input",{attrs:{type:"hidden",id:"status"}}),t("el-input",{attrs:{type:"hidden",id:"timeCreate"}}),t("el-input",{attrs:{type:"hidden",id:"timeUpdate"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.doAddBean}},[e._v("确 定")])],1)])],1)])},a=[],l={name:"StockBuyRule",data:function(){var e=function(e,t,i){var n=/^(0|([1-9]\d*))(\.\d+)?$/g;""===t?i(new Error("请输入内容")):n.test(t)?i():i(new Error("请输入数字"))},t=function(e,t,i){var n=/^(?:[0-9]\d*)$/g;""===t?i(new Error("请输入内容")):n.test(t)?i():i(new Error("请输入0及0以上的整数"))};return{total:0,page:1,size:this.$ELEMENT.pagesize,keyword:"",loading:!1,beanlist:[],bean:{id:null,timeMarket:3,timeMarketOption:0,rulePeriod:52,turnoverLimit:20,turnoverLimitOption:0,converLimit:1.1,converLimitOption:0,shockLimit:.45,shockLimitOption:0,buyPriceLimit:1.03,buyPriceLimitOption:0,status:0},title:"添加买入策略",dialogVisible:!1,rules:{timeMarket:[{validator:t,trigger:"blur",required:!0}],rulePeriod:[{validator:t,trigger:"blur",required:!0}],turnoverLimit:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}]},showAddbtn:!1,tableColumns:[{prop:"status",label:"状态",show:!0},{prop:"timeMarket",label:"上市时长/年",show:!0},{prop:"timeMarketOption",label:"开启",show:!0},{prop:"rulePeriod",label:"策略周期/周",show:!0},{prop:"turnoverLimit",label:"成交金额比例",show:!0},{prop:"turnoverLimitOption",label:"开启",show:!0},{prop:"converLimit",label:"收敛度",show:!0},{prop:"converLimitOption",label:"开启",show:!0},{prop:"shockLimit",label:"下跌幅度",show:!0},{prop:"shockLimitOption",label:"开启",show:!0},{prop:"buyPriceLimit",label:"买入价限价",show:!0},{prop:"buyPriceLimitOption",label:"开启",show:!0},{prop:"timeCreate",label:"创建时间",show:!0},{prop:"timeUpdate",label:"更新时间",show:!0}]}},mounted:function(){this.getDraft(),this.initBeanlist()},methods:{columnFormat:function(e,t){var i=t.property,n=e[i];return"status"==i?"0"==n?"草稿":"1"==n?"运行":"结束":"timeMarketOption"==i||"turnoverLimitOption"==i||"converLimitOption"==i||"shockLimitOption"==i||"buyPriceLimitOption"==i?"0"==n?"否":"是":n},sizeChange:function(e){this.size=e,this.initBeanlist()},currentChange:function(e){this.page=e,this.initBeanlist()},showAddBeanView:function(){this.emptyBean(),this.title="新增买入策略",this.dialogVisible=!0},showEditBeanView:function(e){this.title="编辑买入策略",this.bean=e,this.dialogVisible=!0},initBeanlist:function(){var e=this;this.loading=!0;var t="/stock/buyrule/?page="+this.page+"&size="+this.size;t+="&keyword="+this.keyword,this.getRequest(t).then((function(t){e.loading=!1,t&&(e.beanlist=t.data,e.total=t.total)}))},emptyBean:function(){this.bean={id:null,timeMarket:3,timeMarketOption:0,rulePeriod:52,turnoverLimit:20,turnoverLimitOption:0,converLimit:1.1,converLimitOption:0,shockLimit:.45,shockLimitOption:0,buyPriceLimit:1.03,buyPriceLimitOption:0,status:0}},getDraft:function(){var e=this;this.getRequest("/stock/buyrule/getDraft").then((function(t){t&&(t.obj?e.showAddbtn=!1:t.obj||(e.showAddbtn=!0))}))},doAddBean:function(){var e=this;this.bean.id?this.$refs["beanForm"].validate((function(t){t&&e.putRequest("/stock/buyrule/",e.bean).then((function(t){t&&(e.dialogVisible=!1,e.initBeanlist())}))})):this.$refs["beanForm"].validate((function(t){t&&e.postRequest("/stock/buyrule/",e.bean).then((function(t){t&&(e.dialogVisible=!1,e.initBeanlist())}))}))},toRunBean:function(e){var t=this;this.$confirm("确认将该买入规则投入运行中？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.getRequest("/stock/buyrule/run/"+e).then((function(e){e&&(t.getDraft(),t.initBeanlist())}))})).catch((function(){t.$message({type:"info",message:"已取消运行该规则"})}))}}},o=l,s=i("2877"),r=Object(s["a"])(o,n,a,!1,null,"765d84fc",null);t["default"]=r.exports},"8dda":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div",[t("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入员工名进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.initBeanlist},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initBeanlist.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.initBeanlist}},[e._v("\n          搜索\n        ")])],1)]),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.beanlist,"row-key":"id",stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},e._l(e.tableColumns,(function(e){return t("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,width:e.width,align:"left"}})})),1),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1)])])},a=[],l={name:"StockMessageLog",data:function(){return{total:0,page:1,size:this.$ELEMENT.pagesize,keyword:"",loading:!1,beanlist:[],tableColumns:[{prop:"msgid",label:"消息代码",width:0},{prop:"employee.name",label:"接收者",width:0},{prop:"statusNote",label:"状态",width:0},{prop:"messageTypeNote",label:"消息分类",width:0},{prop:"sendTypeNote",label:"发送方式",width:0},{prop:"content",label:"内容",width:260},{prop:"timeCreate",label:"创建时间",width:0}]}},mounted:function(){this.initBeanlist()},methods:{sizeChange:function(e){this.size=e,this.initBeanlist()},currentChange:function(e){this.page=e,this.initBeanlist()},initBeanlist:function(){var e=this;this.loading=!0;var t="/stock/messagelog/?page="+this.page+"&size="+this.size;this.keyword&&(t+="&employee.name="+this.keyword),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.beanlist=t.data,e.total=t.total)}))}}},o=l,s=i("2877"),r=Object(s["a"])(o,n,a,!1,null,null,null);t["default"]=r.exports},b861:function(e,t,i){"use strict";i("d5c5")},c305:function(e,t,i){"use strict";i("1aee")},d34b:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("el-form",{ref:"beanForm",attrs:{model:e.bean,"status-icon":"",rules:e.rules,"label-width":"140px"}},[t("div",{staticClass:"margin-tb-md"}),t("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"买入价:",prop:"buyPrice"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"买入价"},on:{blur:e.doCalculator},model:{value:e.bean.buyPrice,callback:function(t){e.$set(e.bean,"buyPrice",t)},expression:"bean.buyPrice"}},[t("el-button",{attrs:{slot:"append"},on:{click:e.doCalculator},slot:"append"},[e._v("开始计算")])],1)],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"近期最高价:",prop:"priceHigh"}},[t("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"近期最高价"},on:{blur:e.doCalculator},model:{value:e.bean.priceHigh,callback:function(t){e.$set(e.bean,"priceHigh",t)},expression:"bean.priceHigh"}})],1),t("el-form-item",{attrs:{label:"持有数:"}},[t("div",[e._v(e._s(e.bean.holdAmount))])]),t("div",{staticClass:"margin-tb-md"}),t("el-divider",{attrs:{"content-position":"left"}},[e._v("止盈阶段股票交易")]),t("el-form-item",{attrs:{label:"当前所处止盈阶段:"}},[t("div",[e._v(e._s(e.bean.sellStage))])]),t("el-form-item",{attrs:{label:"P1阶段价格:",prop:"p1Ratio"}},[t("div",[e._v(e._s(e.bean.p1Price))]),t("div",{staticClass:"sub-text-c"},[e._v("[P1阶段梯度价格计算公式：股票买入价*P1阶段比例，P1阶段比例："+e._s(e.sellRule.p1Ratio)+"]")])]),t("el-form-item",{attrs:{label:"P2阶段价格:"}},[t("div",[e._v(e._s(e.bean.p2Price))]),t("div",{staticClass:"sub-text-c"},[e._v("[P2阶段梯度价格计算公式：P1阶段价格*P2阶段比例，P2阶段比例："+e._s(e.sellRule.p2Ratio)+"]")])]),t("el-form-item",{attrs:{label:"P3阶段价格:",prop:"p3Ratio"}},[t("div",[e._v(e._s(e.bean.p3Price))]),t("div",{staticClass:"sub-text-c"},[e._v("[P3阶段梯度价格计算公式：P2阶段梯度价格*P3阶段比例，P3阶段比例："+e._s(e.sellRule.p3Ratio)+"]")])]),t("el-form-item",{attrs:{label:"P4阶段价格:",prop:"p4Ratio"}},[t("div",[e._v(e._s(e.bean.p4Price))]),t("div",{staticClass:"sub-text-c"},[e._v("[P4阶段梯度价格计算公式：P3阶段梯度价格*P4阶段比例，P4阶段比例："+e._s(e.sellRule.p4Ratio)+"]")])]),t("el-form-item",{attrs:{label:"P5阶段价格:",prop:"p5Ratio"}},[t("div",[e._v(e._s(e.bean.p5Price))]),t("div",{staticClass:"sub-text-c"},[e._v("[P5阶段梯度价格计算公式：P4阶段梯度价格*P5阶段比例，P5阶段比例："+e._s(e.sellRule.p5Ratio)+"]")])]),t("el-form-item",{attrs:{label:"当前卖出价格:"}},[t("div",[e._v(e._s(e.bean.sellPrice))]),t("div",{staticClass:"sub-text-c"},[e._v("[当前卖出价格计算公式：股票近期最高价*P"+e._s(e.bean.sellStage)+"阶段卖出价比例，\n            P"+e._s(e.bean.sellStage)+"阶段卖出价比例："+e._s(e.bean.spRatio)+"]")])]),t("div",{staticClass:"margin-tb-md"}),t("el-divider",{attrs:{"content-position":"left"}},[e._v("止损阶段股票交易")]),t("el-form-item",{attrs:{label:"止损价格:"}},[t("div",[e._v(e._s(e.bean.closeEma18))]),t("div",[e._v("止损价格计算公式：price_lowest < close_ema_18 ")])])],1)],1)])},a=[],l={name:"StockCalculator",data:function(){var e=function(e,t,i){var n=/^(0|([1-9]\d*))(\.\d+)?$/g;""===t?i(new Error("请输入内容")):n.test(t)?i():i(new Error("请输入数字"))};return{bean:{id:null,buyPrice:null,holdAmount:100,sellStage:0,priceClose:null,priceHigh:null,priceLow:null,priceSellHigh:null,priceSellLow:null,closeEma18:null,p1Price:null,p1SellPrice:null,p2Price:null,p2SellPrice:null,p3Price:null,p3SellPrice:null,p4Price:null,p4SellPrice:null,p5Price:null},rules:{buyPrice:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}],priceHigh:[{validator:e,trigger:"blur",required:!0,message:"必须为数字值"}]},sellRule:{sellRatio:.5,p1Ratio:1.15,p2Ratio:1.1,p3Ratio:1.1,p4Ratio:1.1,p5Ratio:1.1,sp1Ratio:.85,sp2Ratio:.87,sp3Ratio:.89,sp4Ratio:.91}}},mounted:function(){this.getSellRule()},methods:{getSellRule:function(){var e=this;this.getRequest("/stock/sellrule/getRunning").then((function(t){t&&t.obj&&(e.sellRule=t.obj)}))},emptyBean:function(){this.bean={id:null,buyPrice:null,holdAmount:100,sellStage:0,priceClose:null,priceHigh:null,priceLow:null,priceSellHigh:null,priceSellLow:null,closeEma18:null,p1Price:null,p1SellPrice:null,p2Price:null,p2SellPrice:null,p3Price:null,p3SellPrice:null,p4Price:null,p4SellPrice:null,p5Price:null}},doCalculator:function(){var e=this;this.$refs["beanForm"].validate((function(t){if(t){var i=e.bean,n=e.sellRule,a=(i.buyPrice*n.p1Ratio).toFixed(2),l=(a*n.p2Ratio).toFixed(2),o=(l*n.p3Ratio).toFixed(2),s=(o*n.p4Ratio).toFixed(2),r=(s*n.p5Ratio).toFixed(2),c=e.bean.buyPrice,p=e.bean.priceHigh,u=0,d=0;parseFloat(p)<parseFloat(c)?(u=0,d="无"):p>a&&p<l?(u=1,d=n.sp1Ratio):p>l&&p<o?(u=2,d=n.sp2Ratio):p>o&&p<s?(u=3,d=n.sp3Ratio):p>s&&p<r?(u=4,d=n.sp4Ratio):p>r&&(u=5,d=1,p=r);var b="无"==d?"暂无":(p*d).toFixed(2),m=e.$utils.twoJsonMerge(e.bean,{p1Price:a,p2Price:l,p3Price:o,p4Price:s,p5Price:r,sellStage:u,spRatio:d,sellPrice:b});e.bean=m}}))}}},o=l,s=i("2877"),r=Object(s["a"])(o,n,a,!1,null,"e71325ca",null);t["default"]=r.exports},d5c5:function(e,t,i){},dc7e:function(e,t,i){"use strict";i("efa3")},e599:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div"),t("div",[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:e.disabled},on:{click:function(t){return e.reloadWeekly(t)}}},[e._v("\n          生成A股周线\n        ")])],1)]),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"evtTable",staticStyle:{width:"100%"},attrs:{data:e.beanlist,"row-key":"id","expand-row-keys":e.expands,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","row-class-name":e.getRowClassName},on:{"row-click":e.viewEma}},[t("el-table-column",{attrs:{type:"expand",width:"1"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{"padding-left":"60px","padding-bottom":"5px"}},[t("div",{staticClass:"ema-content"},[i.row.emalist&&i.row.emalist.length>0?t("div",{staticClass:"orangeShip"},[t("p",{staticStyle:{color:"#409EFF"}},[t("i",{staticClass:"el-icon-star-off"}),e._v("EMA生成记录")]),t("el-table",{staticStyle:{width:"100%"},attrs:{border:"",stripe:!1,data:i.row.emalist,"header-cell-style":e.tb_header_style}},[t("el-table-column",{attrs:{prop:"timeCreate",label:"创建日期",align:"left"}}),t("el-table-column",{attrs:{prop:"timeRunBegin",label:"运行时间",align:"left"}}),t("el-table-column",{attrs:{prop:"emaIndex",label:"EMA线",align:"left"}}),t("el-table-column",{attrs:{prop:"runStatus",label:"状态",formatter:e.formatterText,align:"left"}}),t("el-table-column",{attrs:{prop:"runStatusDesc",label:"运行结果",align:"left"}}),t("el-table-column",{attrs:{fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[0==i.row.runStatus?t("el-button",{staticStyle:{padding:"3px"},attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.runBuyRule(i.row)}}},[e._v("运行策略\n                        ")]):e._e()]}}],null,!0)})],1)],1):t("div",[e._v("暂无EMA生成记录")])])])]}}])}),t("el-table-column",{attrs:{prop:"dateWeeklyResearch",label:"调研日期",align:"left"}}),t("el-table-column",{attrs:{prop:"dateWeeklyStart",label:"起始日期",align:"left"}}),t("el-table-column",{attrs:{prop:"rehabilitationWay",label:"复权方式",formatter:e.formatterText,align:"left"}}),t("el-table-column",{attrs:{prop:"result",label:"导入结果",formatter:e.formatterText,align:"left"}}),t("el-table-column",{attrs:{prop:"resultDesc",label:"备注",width:"200",align:"left"}}),t("el-table-column",{attrs:{prop:"generateType",label:"生成方式",formatter:e.formatterText,align:"left"}}),t("el-table-column",{attrs:{prop:"timeCreate",label:"运行开始时间",align:"left"}}),t("el-table-column",{attrs:{prop:"timeEnd",label:"运行结束时间",align:"left"}}),t("el-table-column",{attrs:{fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini"},on:{click:function(t){return t.stopPropagation(),e.viewEma(i.row)}}},[e._v("查看EMA\n            ")]),t("el-button",{staticStyle:{padding:"3px"},attrs:{type:"success",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.generateEma(i.row)}}},[e._v("生成EMA\n            ")])]}}])})],1),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1)])])},a=[],l={name:"StockWeeklylineResult",data:function(){return{total:0,page:1,size:this.$ELEMENT.pagesize,keyword:"",loading:!1,beanlist:[],expands:[],expandRow:[],disabled:!1}},mounted:function(){this.initBeanlist()},methods:{tb_header_style:function(){var e={"background-color":"rgb(160, 207, 255)",color:"#fff"};return e},getRowKey:function(e){return"w"+e.id},getRowClassName:function(){return"row-expand-cover"},formatterText:function(e,t){var i=t.property,n=e[i];return"rehabilitationWay"==i?"qfq"==n?"前复权":"hfq"==n?"后复权":"未复权":"result"==i?"0"==n?"成功":"1"==n?"失败":"":"emaResult"==i?"0"==n?"未生成":"1"==n?"已生成":"生成失败":"generateType"==i?"0"==n?"手动生成":"自动生成":"status"==i?"0"==n?"成功":"失败":"runStatus"==i?"0"==n?"未运行":"1"==n?"运行成功":"运行失败":void 0},sizeChange:function(e){this.size=e,this.initBeanlist()},currentChange:function(e){this.page=e,this.initBeanlist()},initBeanlist:function(){var e=this;this.loading=!0;var t="/stock/weeklylineresult/?page="+this.page+"&size="+this.size;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.beanlist=t.data,e.total=t.total)}))},reloadWeekly:function(e){var t=this;e.currentTarget;this.$confirm("此操作将需要时间生成A股周线历史数据和EMA数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e={date_start:"",date_research:""};t.disabled=!0,t.postRequest("/stock/weeklylineresult/",e).then((function(e){t.disabled=!1,e&&t.initBeanlist()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},viewEma:function(e){e.emalist?this.expands.length>0&&this.expands[0]==e.id?(this.expands=[],this.expandRow=[]):(this.expands=[e.id],this.expandRow=[e]):this.getEmaList(e)},getEmaList:function(e){var t=this,i="/stock/weeklylineemaresult/byweekly?wid="+e.id;this.getRequest(i).then((function(i){t.loading=!1,i&&(e.emalist=i,t.expands=[e.id],t.expandRow=[e])}))},expandChange:function(e,t){t.some((function(t){return t.id===e.id}))},generateEma:function(e){var t=this;this.$confirm("确认用该历史行情，生成新的EMA数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.putRequest("/stock/weeklylineemaresult/newema?wid="+e.id).then((function(e){e&&t.initBeanlist()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},runBuyRule:function(e){var t=this;this.$confirm("确认采用该EMA数据运行购买策略吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.putRequest("/stock/weeklylineemaresult/runBuyRule?emaid="+e.id).then((function(e){e&&t.getEmaList(t.expandRow[0])}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))}}},o=l,s=(i("c305"),i("2877")),r=Object(s["a"])(o,n,a,!1,null,"10b47995",null);t["default"]=r.exports},efa3:function(e,t,i){}}]);
//# sourceMappingURL=chunk-6a6b2f74.95905e02.js.map